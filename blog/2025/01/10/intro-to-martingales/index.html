<!DOCTYPE html>
<html>
<head>
    <title>A short introduction to Martingales</title>
    <meta charset='UTF-8'>
    <meta content='width=device-width, initial-scale=1' name='viewport'/>
    <meta name='description' content='Gregory Gundersen is a PhD candidate at Princeton.'>
    <meta name='keywords' content=''>
    <meta name='author' content='Gregory Gundersen'>
    
    <link href='/css/blog.css' rel='stylesheet'/>
    <link href='/css/trac.css' rel='stylesheet'/>
    <link href='/css/markdown.css' rel='stylesheet'/>
    
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>
    
    <script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  jax: ['input/TeX', 'output/HTML-CSS'],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    extensions: ['color.js']
  },
  messageStyle: 'none',
  'HTML-CSS': { preferredFont: 'TeX', availableFonts: ['STIX','TeX'] }
});
</script>

<script src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML' type='text/javascript'></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
</head>
<body>
    <div class='content'>
        <div class='nav'>
    <ul class='wrap'>
        <li><a href='/'>Home</a></li>
        <li><a href='/blog'>Blog</a></li>
        <li><a href='/feed.xml'>RSS</a></li>
    </ul>
</div>
        <div class='front-matter'>
            <div class='wrap'>
                <h1>A short introduction to Martingales</h1>
                <h4>One way to think about dependent random variables.</h4>
                <div class='bylines'>
                    <div class='byline'>
                        <h3>Published</h3>
                        <p>10 January 2025</p>
                    </div>
                </div>
                <div class='clear'></div>
            </div>
        </div>
        <div class='wrap article'>
            <ul><li><a href="#introduction">Introduction</a><ul><li><a href="#the-maths-unfortunately">The maths, unfortunately</a><ul><li><a href="#example">Example</a></li></ul></li><li><a href="#stopping-times-and-the-optional-stopping-theorem">Stopping times, and the Optional Stopping theorem</a><ul><li><a href="#optional-stopping-theorem">Optional Stopping Theorem</a></li></ul></li></ul></li></ul>
            <h1 id="introduction">Introduction</h1>

<p>Martingales are elegant and powerful tools to study sequences of dependent random variables. It is originated from gambling, where a gambler can adjust the bet according to the previous results.</p>

<p>Martingales are one of the more abstract parts of probability. Which is a pity, since they are also one of the most useful bits of probability. Martingales are one of the simplest models of dependent random variables, and that is why they come up in examples over and over again. If you can identify when a stocastic process as a martingale, then you know some rather general things about that process that may lead you to being able to get specific answers to your questions.</p>

<p>If you have a stocastic process whos expected value is time-dependent, then you can potentially convert your process into a martingale. All you need to do is to add the proper conditional expected value. Then you can apply all sorts of martingal theorems (convergence, optional stopping etc) which can lead to explict numerical answers. However approaching martingales with the attitude that you <strong>will</strong> calculate things will leave you dissapointed. There are very few explicit examples.</p>

<p>You should approach your problem from the point of view that “process \(X_t\) is a martingale, so any stopping strategy will not affect its expected value”. This realization is useful for an applied as it stops you ways wasting time optimising the expected value.</p>

<h2 id="the-maths-unfortunately">The maths, unfortunately</h2>

<p>We denote our <a href="https://en.wikipedia.org/wiki/Probability_space">sample space</a> as $S$ (for example $S = {+1, -1}$). Let $F_n$ be a filtration of the event space.</p>

<p>Let $X_0, X_1, X_2, \dots$ be a sequence of random variables. We will imagine that we are acquiring information about $S$ in stages. The random variable $X_n$ is what we know at stage $n$. If $Z$ is any random variable, let</p>

\[E\left[Z \mid F_nn\right]\]

<p>denote the conditional expectation of $Z$ given all the information that is available to us on the $n$th stage. If you saw all the information you could obtain by stage $n$, and you made a Bayesian update to your probability distribution on $S$ in light of this information, then $E\left[Z\mid F_n\right]$ would represent the expected value of $Z$ with respect to this revised probability.</p>

<p>If we don’t specify otherwise, we assume that the information available at stage n consists precisely of the values $X_0, X_1, X_2, \dots$ so that</p>

\[E\left[Z \mid F_nn\right] = E\left[Z \mid X_0, X_1, X_2, \dots, X_n].\]

<p>However in some applications, one could imagine there are other things known as well at stage $n$. For example, maybe $X_n$ represents the price of an asset on the $n$th day and $Y_n$ represents the price of asset $Y$ on the $n$th day. If you have access to the sequence $X_0, X_1, X_2, \dots, X_n]$ and the sequence $Y_0, Y_1, Y_2, \dots, Y_n]$. Then $E\left[Z \mid F_nn\right]$ would be our revised expectation of $Z$ after we have incorporated what we know about both sequences.</p>

<p>We say that sequence $X_n$ is a martingale if:</p>

<ol>
  <li>$E\left[\mid X_n \mid\right] &lt; \infty$ for all $n$.</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>$E\left[X_{n+1}</td>
          <td>F_n\right] = X_n$  for all $n$.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<p>Informally $X_0, X_1, \ldots$ is a martingale if the following is true: taking into account all the information I have at stage $n$, the conditional expected value of $X_{n+1}$ is just $X_n$. Basically, if your process is a martingale, you can’t know anything about the future other that everything you know in the present moment (and the entire history of the process).</p>

<p>To motivate this definition, imagine that $X_n$ represents the price of a stock on day $n$. In this context, the martingale condition states informally that “The expected value of the stock tomorrow, given all I know today, is the value of the stock today.” After all, if the stock price today were 50 and I expected it to be 60 tomorrow, then I would have an easy way to make money in expectation (buy today, sell tomorrow). But if the public had the same information I had, then other investors would also try to cash in on this by buying the stock today at 50, and people holding the stock would be reluctant to sell for 50. Indeed, we’d expect the price to be quickly bid up to about 60 today.</p>

<h3 id="example">Example</h3>

<p>Let $S = {+1, -1}$ and let $X_0, X_1, X_2, \dots$ be a sequence of random variables taking values in $S$. $X_n$ is +1 with probability 0.5 and -1 with probability 0.5 We define:</p>

\[M_n = \sum_{i=0}^n X_n\]

<p>$M_n$ is a martingale since:</p>

\[E\left[M_{n+1} \mid F_n\right] = E\left[M_{n} + X_{n+1} \mid F_n\right]  = E\left[M_{n}\mid F_n\right] + E\left[X_{n+1} \mid F_n\right]\]

<p>Since $M_n$ is known at stage n, we have $ E\left[M_{n}\mid F_n\right] = M_n$. Since we know nothing more about $X_{n+1}$ at stage $n$ than we originally knew, we have $E\left[X_{n+1} \mid F_n\right] =0$. So</p>

\[E\left[M_{n+1} \mid F_n\right] = M_n\]

<p>So the sequence $M_n$ is a martingale.</p>

<h2 id="stopping-times-and-the-optional-stopping-theorem">Stopping times, and the Optional Stopping theorem</h2>

<p>A <strong>stopping time</strong> is a (non-negative integer-valued) random variable, $T$, such that for all $n$ the event that $T = n$ depends only on the information available to us at time $n$. Stopping times can be interprete as the time that you sell an asset, given that the sequence of prices is $X_0, X_1, X_2, \dots$</p>

<p>Saying that $T$ is a stopping time means that the decision to sell at time $n$ depends only the information we have up to time $n$, and not on future prices. Specifying a stopping time can be interpreted as specifying a strategy for deciding when to sell the asset.</p>

<p>For example, let $X_0, X_1, X_2, \dots$ be i.i.d. random variables equal to −1 with probability .5 and 1 with probability .5 and let $X_0 = 0$ and $M_n = \sum_{i=0}^n X_n $ for $n ≥ 0$. These four statements:</p>

<ol>
  <li>The smallest $T$ for which $\mid X_T \mid = 50$</li>
  <li>The smallest $T$ for which $X_tT \in {−30, 100}$</li>
  <li>The smallest $T$ for which $X_T = 17$.</li>
  <li>The $T$ at which the $X_n$ sequence achieves the value 17 for the 9th time.</li>
</ol>

<p>all define stopping times.</p>

<h3 id="optional-stopping-theorem">Optional Stopping Theorem</h3>

<p>The optional stopping theorem says that the expected value of a martingale at a stopping time is equal to its initial expected value. It tells us that you can’t make money (in expectation) by buying and selling an asset whose price is a martingale. Precisely, if you buy the asset at some time and adopt any strategy at all for deciding when to sell it, then the expected price at te time you sell is the price you originally paid. In other words, if the market price is a martingale, you cannot make money in expectation by “timing the market.”</p>

<p><strong>Definition</strong> Boundedness. We say a random sequence $X_0, X_1, X_2, \dots$ is <strong>bounded</strong> when there exists some $C &gt; 0$, we have that with probability one $\mid X_n \mid ≤ C$ for all $n \geq 0$. A stopping time $T$ is bounded if there exists some $C &gt; 0$ such that $T \geq C$ with probability one.</p>

<p><strong>Optional Stopping Theorem (first version)</strong>: Suppose that $X_$ is a known constant, that $X_0, X_1, X_2, \dots$ is a bounded martingale, and that $T$ is a stopping time. Then $E\left[X_T\right] = X_0$.</p>

<p><strong>Optional Stopping Theorem (second version):</strong> Suppose that $X_$ is a known constant, that $X_0, X_1, X_2, \dots$ is a martingale, and that $T$ is a bounded stopping time. Then $E\left[X_T\right] = X_0$.</p>

<p>These boundedness assumptions are actually very important. Without them the theorem would not be true.</p>

<p>For a counterexample, recall that if $X_0 = 0$ and $X_n$ goes up or down by 1 at each time step (each with probability .5) then $X_0, X_1, X_2, \dots$ is a martingale. If we let $T$ be the first $n$ for which $X_n = 100$, then $T$ is a finite number with probability one. (That is, with probability one $X_n$ reaches T eventually.) But then $X_T$ is always 100, which means that $E\left[X_T\right]  \neq X_0$.</p>

        </div>
        
    </div>
</body>
</html>